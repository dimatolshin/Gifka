import{u as j,g as S,r as g,a as D,t as E,j as e,d as I}from"./index-5e81b91c.js";import{B as x}from"./Button-1ab70214.js";import{u as P,a as v,q as k}from"./queryClient-4e3f4a74.js";import{d as M,s as R,a as K,b as Q}from"./authUser-3cd74b23.js";import{u as T,t as z,d as V,s as J}from"./AuthType-cfb6d15b.js";import{L as W}from"./ListBox-a88bdaf2.js";import{_ as $}from"./index-cd3c7b2d.js";const X="_deleteBtn_ne8hy_1",Y="_cancel_ne8hy_14",Z="_error_ne8hy_27",w={deleteBtn:X,cancel:Y,error:Z};function ee(){var b;const{t:s}=P(),r=j(S),[a,u]=g.useState(!1),[l,c]=g.useState(!1),d=D(),p=v({mutationFn:h=>M(h.password,h.token),onSuccess:()=>{d(E.logout())}},k),{register:i,handleSubmit:_,formState:{errors:t},reset:f}=T({resolver:z(V)}),C=()=>{c(h=>!h)},m=()=>{u(h=>!h),f()};return e.jsxs("div",{children:[e.jsx(x,{className:a?w.cancel:w.deleteBtn,onClick:m,children:a?"Отмена":s("Delete account")}),a&&e.jsxs("form",{className:w.form,onSubmit:_(({password:h})=>{p.mutate({password:h,token:r})}),children:[e.jsxs("label",{className:w.label,children:[e.jsx("span",{className:w.formTitle,children:"Password"}),e.jsxs("div",{className:`input max-w-72 ${t.password?"border-danger":""}`,"data-toggle-password":"true",children:[e.jsx("input",{autoComplete:"password",placeholder:"Enter Password",type:l?"text":"password",...i("password")}),e.jsx("div",{onClick:C,className:"btn btn-icon","data-toggle-password-trigger":"true",children:l?e.jsx("i",{className:"ki-outline ki-eye-slash toggle-password-active:block"}):e.jsx("i",{className:"ki-outline ki-eye toggle-password-active:hidden"})})]}),t&&e.jsx("span",{className:w.error,children:s((b=t.password)==null?void 0:b.message)})]}),p.error&&e.jsx("span",{className:w.error,children:p.error.message}),e.jsx(x,{className:w.deleteBtn,isLoading:p.isPending,children:"Delete"})]})]})}const se="_langBox_f8w2s_1",ae="_descr_f8w2s_6",L={langBox:se,descr:ae};function te(){const{t:s,i18n:r}=P(),a=r.language,u=d=>{r.changeLanguage(d)},l=[{value:"en",content:"English",id:"1",disabled:a==="en"},{value:"ru",content:"Русский",id:"2",disabled:a==="ru"},{value:"fr",content:"Français",id:"3",disabled:a==="fr"},{value:"es",content:"Español",id:"4",disabled:a==="es"},{value:"pr",content:"Português",id:"5",disabled:a==="pr"}],c=l.find(d=>d.value===a);return e.jsxs("div",{className:L.langBox,children:[e.jsxs("p",{className:L.descr,children:[s("Language"),":"]}),e.jsx(W,{defaultValue:c?c.content:s("Language"),onChange:u,items:l})]})}const oe="_btn_7watp_1",ne="_change_7watp_14",re="_label_7watp_27",le="_error_7watp_34",n={btn:oe,change:ne,label:re,error:le};function ce(){var B,F,H;const{t:s}=P(),r=j(S),[a,u]=g.useState(!1),[l,c]=g.useState(!1),[d,p]=g.useState(!1),[i,_]=g.useState(!1),t=v({mutationFn:o=>R(o.new_password,o.re_new_password,o.old_password,o.token),onSuccess:()=>{u(!1),$.success("Пароль успешно изменён"),b()}},k),{register:f,handleSubmit:C,formState:{errors:m},reset:b}=T({resolver:z(J)}),h=()=>{c(o=>!o)},A=()=>{p(o=>!o)},O=()=>{_(o=>!o)},U=()=>{u(o=>!o),b()};return e.jsxs("div",{children:[e.jsx(x,{className:a?n.change:n.btn,onClick:U,children:a?"Отмена":s("Change password")}),a&&e.jsxs("form",{className:n.form,onSubmit:C(({old_password:o,password:q,confirmPassword:G})=>{t.mutate({new_password:q,re_new_password:G,old_password:o,token:r})}),children:[e.jsxs("label",{className:n.label,children:[e.jsx("span",{className:n.formTitle,children:"Old Password"}),e.jsxs("div",{className:`input max-w-72 ${m.old_password?"border-danger":""}`,"data-toggle-password":"true",children:[e.jsx("input",{autoComplete:"new-password",placeholder:"Old Password",type:l?"text":"password",...f("old_password")}),e.jsx("div",{onClick:h,className:"btn btn-icon","data-toggle-password-trigger":"true",children:l?e.jsx("i",{className:"ki-outline ki-eye-slash toggle-password-active:block"}):e.jsx("i",{className:"ki-outline ki-eye toggle-password-active:hidden"})})]}),m&&e.jsx("span",{className:n.error,children:s((B=m.old_password)==null?void 0:B.message)})]}),e.jsxs("label",{className:n.label,children:[e.jsx("span",{className:n.formTitle,children:"Password"}),e.jsxs("div",{className:`input max-w-72 ${m.password?"border-danger":""}`,"data-toggle-password":"true",children:[e.jsx("input",{autoComplete:"new-password",placeholder:"Enter Password",type:d?"text":"password",...f("password")}),e.jsx("div",{onClick:A,className:"btn btn-icon","data-toggle-password-trigger":"true",children:d?e.jsx("i",{className:"ki-outline ki-eye-slash toggle-password-active:block"}):e.jsx("i",{className:"ki-outline ki-eye toggle-password-active:hidden"})})]}),m&&e.jsx("span",{className:n.error,children:s((F=m.password)==null?void 0:F.message)})]}),e.jsxs("label",{className:n.label,children:[e.jsx("span",{className:n.formTitle,children:"Confirm Password"}),e.jsxs("div",{className:`input max-w-72 ${m.confirmPassword?"border-danger":""}`,"data-toggle-password":"true",children:[e.jsx("input",{autoComplete:"new-password",placeholder:"Re-enter Password",type:i?"text":"password",...f("confirmPassword")}),e.jsx("div",{onClick:O,className:"btn btn-icon","data-toggle-password-trigger":"true",children:i?e.jsx("i",{className:"ki-outline ki-eye-slash toggle-password-active:block"}):e.jsx("i",{className:"ki-outline ki-eye toggle-password-active:hidden"})})]}),m&&e.jsx("span",{className:n.error,children:s((H=m.confirmPassword)==null?void 0:H.message)})]}),t.error&&e.jsx("span",{className:n.error,children:t.error.message}),e.jsx(x,{isLoading:t.isPending,className:n.btn,children:"Submit"})]})]})}const de="_deleteBtn_1cn99_1",ie="_cancel_1cn99_14",y={deleteBtn:de,cancel:ie};function me(){const{t:s}=P(),[r,a]=g.useState(!1),u=D(),l=j(S),c=()=>{a(i=>!i)},d=v({mutationFn:i=>K(i.token),onSuccess:()=>{u(E.logout())}},k),p=()=>{d.mutate({token:l})};return e.jsxs("div",{children:[e.jsx(x,{className:r?y.cancel:y.deleteBtn,onClick:c,children:r?"Отмена":s("Delete account")}),r&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Подтвердите удаление"}),e.jsx(x,{onClick:p,className:y.deleteBtn,children:s("Delete account")})]})]})}const ue="_btn_14wzf_1",pe="_change_14wzf_14",he="_modalInput_14wzf_27",ge="_label_14wzf_32",we="_error_14wzf_39",N={btn:ue,change:pe,modalInput:he,label:ge,error:we};function xe(){const s=j(I),r=j(S),{t:a}=P(),[u,l]=g.useState(""),[c,d]=g.useState(!1),p=()=>{d(t=>!t)},i=v({mutationFn:t=>Q(t.token,t.promocode),onSuccess:t=>{$.success(t.Success),k.invalidateQueries({queryKey:["user"]})},onError:t=>{$.error(t.message)}},k),_=()=>{i.mutate({token:r,promocode:u})};return e.jsxs("div",{children:[e.jsx("p",{children:`${a("My promo code")}: ${s==null?void 0:s.promocode}`}),e.jsx(x,{className:c?N.change:N.btn,onClick:p,children:c?"Отмена":a("Change promo code")}),c&&e.jsxs("div",{children:[e.jsxs("label",{className:N.label,htmlFor:"",children:[e.jsx("span",{children:"Promocode"}),e.jsx("div",{className:"input max-w-72","data-toggle-password":"true",children:e.jsx("input",{autoComplete:"promo",placeholder:"Promocode",type:"text",onChange:t=>l(t.target.value),maxLength:15})})]}),e.jsx(x,{onClick:_,className:N.btn,children:a("Change promo code")})]}),i.error&&e.jsx("span",{className:N.error,children:i.error.message})]})}function Se(){const s=j(I);return e.jsxs(e.Fragment,{children:[e.jsx(te,{}),e.jsx(xe,{}),s!=null&&s.is_google_profile?e.jsx(me,{}):e.jsxs("div",{children:[e.jsx(ce,{}),e.jsx(ee,{})]})]})}export{Se as default};
