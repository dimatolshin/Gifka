import{r as C,j as d,k as Ze,l as je,i as et,u as Fe,g as tt,R as nt,d as rt}from"./index-c7b636f8.js";import{b as ee,a as Z,q as U,u as ot}from"./queryClient-c4fa2072.js";import{B as G}from"./Button-c83092cb.js";import"./Modal.module-7cebd6cd.js";import{u as at}from"./useQuery-73ca1583.js";import{L as Q}from"./ListBox-78907d98.js";import{_ as be}from"./index-7894055a.js";import{a as st}from"./staticGif-8a59da74.js";const it="_adminPanelBlock_e9yg1_1",lt={adminPanelBlock:it},te="https://bwcreatorhub.com";function ct(e){return ee.post(`${te}/api/load_picture/`,e).then(()=>{})}function ut(){return ee.get(`${te}/api/all_picture/`).then(e=>e.data).catch(e=>{const t=Object.keys(e.response.data).map(n=>`${e.response.data[n]}`).join(", ");throw new Error(t)})}const dt=(e,t,n,r,s,l,p,h,m,S,v,D)=>ee.post(`${te}/api/createFullPicture/`,{picture_id:e,country:t,language:n,value:r,format:s,topic:l,color:p,left:h,right:m,top:S,bottom:v,size:D}).then(_=>_.data).catch(_=>{const T=Object.keys(_.response.data).map(M=>`${_.response.data[M]}`).join(", ");throw new Error(T)}),ft=(e,t,n,r,s,l,p,h,m,S,v,D)=>ee.post(`${te}/api/createFullPicture/`,{full_picture_id:e,country:t,language:n,value:r,format:s,topic:l,color:p,left:h,right:m,top:S,bottom:v,size:D}).then(_=>_.data).catch(_=>{const T=Object.keys(_.response.data).map(M=>`${_.response.data[M]}`).join(", ");throw new Error(T)}),pt=e=>ee.post(`${te}/api/get_is_publish/`,{full_picture_id:e}).then(t=>t.data).catch(t=>{const n=Object.keys(t.response.data).map(r=>`${t.response.data[r]}`).join(", ");throw new Error(n)});var P=[];for(var De=0;De<256;++De)P.push((De+256).toString(16).slice(1));function ht(e,t=0){return(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase()}var pe,gt=new Uint8Array(16);function mt(){if(!pe&&(pe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(gt)}var yt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Be={randomUUID:yt};function vt(e,t,n){if(Be.randomUUID&&!t&&!e)return Be.randomUUID();e=e||{};var r=e.random||(e.rng||mt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=r[s];return t}return ht(r)}const St="_fileBlock_16uh2_1",_t="_inputBlock_16uh2_8",bt="_hiddenInput_16uh2_14",Dt="_customLabel_16uh2_18",wt="_loadButton_16uh2_30",xt="_deleteButton_16uh2_37",Ct="_selectedFile_16uh2_43",Pt="_selectedFilesList_16uh2_47",W={fileBlock:St,inputBlock:_t,hiddenInput:bt,customLabel:Dt,loadButton:wt,deleteButton:xt,selectedFile:Ct,selectedFilesList:Pt};function Tt(){const e=C.useRef(null),[t,n]=C.useState([]),[r,s]=C.useState(null),l=v=>{const D=Array.from(v.target.files).map(_=>({id:vt(),file:_}));n(_=>[..._,...D]),s(D[D.length-1].file.name)},p=Z({mutationFn:v=>ct(v.formData),onSuccess:()=>{s(null),n([]),U.invalidateQueries({queryKey:["img"]})}},U),h=async()=>{if(t.length===0){alert("Файл не добавлен");return}const v=new FormData;t.forEach(({file:D})=>{v.append("photos",D)}),p.mutate({formData:v})},m=v=>{n(D=>{const _=D.filter(T=>T.id!==v);return _.length>0?s(_[_.length-1].file.name):s(null),_})},S=()=>{e.current.click()};return d.jsxs("div",{className:W.fileBlock,children:[d.jsxs("div",{className:W.inputBlock,children:[d.jsx("input",{type:"file",multiple:!0,onChange:l,className:W.hiddenInput,ref:e,accept:"image/*,.png,.jpg,.gif,.web,.jpeg,.svg"}),d.jsx("button",{onClick:S,className:W.customLabel,children:"Выбрать файлы"}),d.jsx(G,{className:W.loadButton,onClick:h,children:"Загрузить"})]}),r&&d.jsxs("span",{className:W.fileName,children:["Последний загруженный файл: ",r]}),d.jsx("ul",{className:W.selectedFilesList,children:t.map(({id:v,file:D})=>d.jsxs("li",{children:[d.jsxs("p",{className:W.selectedFile,children:["Название файла: ",D.name]}),d.jsx(G,{className:W.deleteButton,onClick:()=>m(v),children:"Удалить"})]},v))})]})}const Nt="_mainBox_p5ybv_1",Et="_redactorBox_p5ybv_6",Bt="_draggableBox_p5ybv_12",Mt="_redactorImg_p5ybv_19",Ot="_redactorInput_p5ybv_23",jt="_publish_p5ybv_27",Ft="_topbar_p5ybv_34",Rt="_topBtn_p5ybv_42",It="_defaultSelect_p5ybv_48",Ut="_lastDefaultSelect_p5ybv_55",kt="_adminRedactorButton_p5ybv_59",Lt="_draggableImgBox_p5ybv_66",x={mainBox:Nt,redactorBox:Et,draggableBox:Bt,redactorImg:Mt,redactorInput:Ot,publish:jt,topbar:Ft,topBtn:Rt,defaultSelect:It,lastDefaultSelect:Ut,adminRedactorButton:kt,draggableImgBox:Lt};var ge={exports:{}},Re={},Ie={exports:{}},Wt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yt=Wt,$t=Yt;function Ue(){}function ke(){}ke.resetWarningCache=Ue;var Xt=function(){function e(r,s,l,p,h,m){if(m!==$t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ke,resetWarningCache:Ue};return n.PropTypes=n,n};Ie.exports=Xt();var Le=Ie.exports;function We(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=We(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Me(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=We(e))&&(r&&(r+=" "),r+=t);return r}const At=Object.freeze(Object.defineProperty({__proto__:null,clsx:Me,default:Me},Symbol.toStringTag,{value:"Module"})),Vt=Ze(At);var b={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.dontSetMe=Kt;k.findInArray=Ht;k.int=Gt;k.isFunction=qt;k.isNum=zt;function Ht(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function qt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function zt(e){return typeof e=="number"&&!isNaN(e)}function Gt(e){return parseInt(e,10)}function Kt(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var H={};Object.defineProperty(H,"__esModule",{value:!0});H.browserPrefixToKey=$e;H.browserPrefixToStyle=Qt;H.default=void 0;H.getPrefix=Ye;const we=["Moz","Webkit","O","ms"];function Ye(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<we.length;r++)if($e(t,we[r])in n)return we[r];return""}function $e(e,t){return t?"".concat(t).concat(Jt(e)):e}function Qt(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function Jt(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}H.default=Ye();Object.defineProperty(b,"__esModule",{value:!0});b.addClassName=Ve;b.addEvent=tn;b.addUserSelectStyles=pn;b.createCSSTransform=cn;b.createSVGTransform=un;b.getTouch=dn;b.getTouchIdentifier=fn;b.getTranslation=Pe;b.innerHeight=an;b.innerWidth=sn;b.matchesSelector=Ae;b.matchesSelectorAndParentsTo=en;b.offsetXYFromParent=ln;b.outerHeight=rn;b.outerWidth=on;b.removeClassName=He;b.removeEvent=nn;b.removeUserSelectStyles=hn;var j=k,Oe=Zt(H);function Xe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Xe=function(r){return r?n:t})(e)}function Zt(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=Xe(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)){var p=s?Object.getOwnPropertyDescriptor(e,l):null;p&&(p.get||p.set)?Object.defineProperty(r,l,p):r[l]=e[l]}return r.default=e,n&&n.set(e,r),r}let he="";function Ae(e,t){return he||(he=(0,j.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,j.isFunction)(e[n])})),(0,j.isFunction)(e[he])?e[he](t):!1}function en(e,t,n){let r=e;do{if(Ae(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function tn(e,t,n,r){if(!e)return;const s={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,s):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function nn(e,t,n,r){if(!e)return;const s={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,s):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function rn(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,j.int)(n.borderTopWidth),t+=(0,j.int)(n.borderBottomWidth),t}function on(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,j.int)(n.borderLeftWidth),t+=(0,j.int)(n.borderRightWidth),t}function an(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,j.int)(n.paddingTop),t-=(0,j.int)(n.paddingBottom),t}function sn(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,j.int)(n.paddingLeft),t-=(0,j.int)(n.paddingRight),t}function ln(e,t,n){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),l=(e.clientX+t.scrollLeft-s.left)/n,p=(e.clientY+t.scrollTop-s.top)/n;return{x:l,y:p}}function cn(e,t){const n=Pe(e,t,"px");return{[(0,Oe.browserPrefixToKey)("transform",Oe.default)]:n}}function un(e,t){return Pe(e,t,"")}function Pe(e,t,n){let{x:r,y:s}=e,l="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(t){const p="".concat(typeof t.x=="string"?t.x:t.x+n),h="".concat(typeof t.y=="string"?t.y:t.y+n);l="translate(".concat(p,", ").concat(h,")")+l}return l}function dn(e,t){return e.targetTouches&&(0,j.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,j.findInArray)(e.changedTouches,n=>t===n.identifier)}function fn(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function pn(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Ve(e.body,"react-draggable-transparent-selection")}function hn(e){if(e)try{if(e.body&&He(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function Ve(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function He(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var L={};Object.defineProperty(L,"__esModule",{value:!0});L.canDragX=yn;L.canDragY=vn;L.createCoreData=_n;L.createDraggableData=bn;L.getBoundPosition=gn;L.getControlPosition=Sn;L.snapToGrid=mn;var O=k,K=b;function gn(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:Dn(r);const s=Te(e);if(typeof r=="string"){const{ownerDocument:l}=s,p=l.defaultView;let h;if(r==="parent"?h=s.parentNode:h=l.querySelector(r),!(h instanceof p.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const m=h,S=p.getComputedStyle(s),v=p.getComputedStyle(m);r={left:-s.offsetLeft+(0,O.int)(v.paddingLeft)+(0,O.int)(S.marginLeft),top:-s.offsetTop+(0,O.int)(v.paddingTop)+(0,O.int)(S.marginTop),right:(0,K.innerWidth)(m)-(0,K.outerWidth)(s)-s.offsetLeft+(0,O.int)(v.paddingRight)-(0,O.int)(S.marginRight),bottom:(0,K.innerHeight)(m)-(0,K.outerHeight)(s)-s.offsetTop+(0,O.int)(v.paddingBottom)-(0,O.int)(S.marginBottom)}}return(0,O.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,O.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,O.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,O.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function mn(e,t,n){const r=Math.round(t/e[0])*e[0],s=Math.round(n/e[1])*e[1];return[r,s]}function yn(e){return e.props.axis==="both"||e.props.axis==="x"}function vn(e){return e.props.axis==="both"||e.props.axis==="y"}function Sn(e,t,n){const r=typeof t=="number"?(0,K.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const s=Te(n),l=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,K.offsetXYFromParent)(r||e,l,n.props.scale)}function _n(e,t,n){const r=!(0,O.isNum)(e.lastX),s=Te(e);return r?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function bn(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function Dn(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Te(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var me={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.default=wn;function wn(){}Object.defineProperty(me,"__esModule",{value:!0});me.default=void 0;var xe=Cn(C),B=Ne(Le),xn=Ne(je),N=b,X=L,Ce=k,J=Ne(ye);function Ne(e){return e&&e.__esModule?e:{default:e}}function qe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(qe=function(r){return r?n:t})(e)}function Cn(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=qe(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)){var p=s?Object.getOwnPropertyDescriptor(e,l):null;p&&(p.get||p.set)?Object.defineProperty(r,l,p):r[l]=e[l]}return r.default=e,n&&n.set(e,r),r}function E(e,t,n){return t=Pn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e){var t=Tn(e,"string");return typeof t=="symbol"?t:String(t)}function Tn(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const R={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let A=R.mouse,ve=class extends xe.Component{constructor(){super(...arguments),E(this,"dragging",!1),E(this,"lastX",NaN),E(this,"lastY",NaN),E(this,"touchIdentifier",null),E(this,"mounted",!1),E(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,N.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,N.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&t.preventDefault();const s=(0,N.getTouchIdentifier)(t);this.touchIdentifier=s;const l=(0,X.getControlPosition)(t,s,this);if(l==null)return;const{x:p,y:h}=l,m=(0,X.createCoreData)(this,p,h);(0,J.default)("DraggableCore: handleDragStart: %j",m),(0,J.default)("calling",this.props.onStart),!(this.props.onStart(t,m)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,N.addUserSelectStyles)(r),this.dragging=!0,this.lastX=p,this.lastY=h,(0,N.addEvent)(r,A.move,this.handleDrag),(0,N.addEvent)(r,A.stop,this.handleDragStop))}),E(this,"handleDrag",t=>{const n=(0,X.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let h=r-this.lastX,m=s-this.lastY;if([h,m]=(0,X.snapToGrid)(this.props.grid,h,m),!h&&!m)return;r=this.lastX+h,s=this.lastY+m}const l=(0,X.createCoreData)(this,r,s);if((0,J.default)("DraggableCore: handleDrag: %j",l),this.props.onDrag(t,l)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const m=document.createEvent("MouseEvents");m.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(m)}return}this.lastX=r,this.lastY=s}),E(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,X.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let m=r-this.lastX||0,S=s-this.lastY||0;[m,S]=(0,X.snapToGrid)(this.props.grid,m,S),r=this.lastX+m,s=this.lastY+S}const l=(0,X.createCoreData)(this,r,s);if(this.props.onStop(t,l)===!1||this.mounted===!1)return!1;const h=this.findDOMNode();h&&this.props.enableUserSelectHack&&(0,N.removeUserSelectStyles)(h.ownerDocument),(0,J.default)("DraggableCore: handleDragStop: %j",l),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,h&&((0,J.default)("DraggableCore: Removing handlers"),(0,N.removeEvent)(h.ownerDocument,A.move,this.handleDrag),(0,N.removeEvent)(h.ownerDocument,A.stop,this.handleDragStop))}),E(this,"onMouseDown",t=>(A=R.mouse,this.handleDragStart(t))),E(this,"onMouseUp",t=>(A=R.mouse,this.handleDragStop(t))),E(this,"onTouchStart",t=>(A=R.touch,this.handleDragStart(t))),E(this,"onTouchEnd",t=>(A=R.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,N.addEvent)(t,R.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,N.removeEvent)(n,R.mouse.move,this.handleDrag),(0,N.removeEvent)(n,R.touch.move,this.handleDrag),(0,N.removeEvent)(n,R.mouse.stop,this.handleDragStop),(0,N.removeEvent)(n,R.touch.stop,this.handleDragStop),(0,N.removeEvent)(t,R.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,N.removeUserSelectStyles)(n)}}findDOMNode(){var t,n;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:xn.default.findDOMNode(this)}render(){return xe.cloneElement(xe.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};me.default=ve;E(ve,"displayName","DraggableCore");E(ve,"propTypes",{allowAnyClick:B.default.bool,children:B.default.node.isRequired,disabled:B.default.bool,enableUserSelectHack:B.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:B.default.arrayOf(B.default.number),handle:B.default.string,cancel:B.default.string,nodeRef:B.default.object,onStart:B.default.func,onDrag:B.default.func,onStop:B.default.func,onMouseDown:B.default.func,scale:B.default.number,className:Ce.dontSetMe,style:Ce.dontSetMe,transform:Ce.dontSetMe});E(ve,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return m.default}}),e.default=void 0;var t=_(C),n=v(Le),r=v(je),s=v(Vt),l=b,p=L,h=k,m=v(me),S=v(ye);function v(u){return u&&u.__esModule?u:{default:u}}function D(u){if(typeof WeakMap!="function")return null;var c=new WeakMap,g=new WeakMap;return(D=function(f){return f?g:c})(u)}function _(u,c){if(!c&&u&&u.__esModule)return u;if(u===null||typeof u!="object"&&typeof u!="function")return{default:u};var g=D(c);if(g&&g.has(u))return g.get(u);var f={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in u)if(y!=="default"&&Object.prototype.hasOwnProperty.call(u,y)){var I=w?Object.getOwnPropertyDescriptor(u,y):null;I&&(I.get||I.set)?Object.defineProperty(f,y,I):f[y]=u[y]}return f.default=u,g&&g.set(u,f),f}function T(){return T=Object.assign?Object.assign.bind():function(u){for(var c=1;c<arguments.length;c++){var g=arguments[c];for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}return u},T.apply(this,arguments)}function M(u,c,g){return c=q(c),c in u?Object.defineProperty(u,c,{value:g,enumerable:!0,configurable:!0,writable:!0}):u[c]=g,u}function q(u){var c=ne(u,"string");return typeof c=="symbol"?c:String(c)}function ne(u,c){if(typeof u!="object"||u===null)return u;var g=u[Symbol.toPrimitive];if(g!==void 0){var f=g.call(u,c||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(u)}class Y extends t.Component{static getDerivedStateFromProps(c,g){let{position:f}=c,{prevPropsPosition:w}=g;return f&&(!w||f.x!==w.x||f.y!==w.y)?((0,S.default)("Draggable: getDerivedStateFromProps %j",{position:f,prevPropsPosition:w}),{x:f.x,y:f.y,prevPropsPosition:{...f}}):null}constructor(c){super(c),M(this,"onDragStart",(g,f)=>{if((0,S.default)("Draggable: onDragStart: %j",f),this.props.onStart(g,(0,p.createDraggableData)(this,f))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),M(this,"onDrag",(g,f)=>{if(!this.state.dragging)return!1;(0,S.default)("Draggable: onDrag: %j",f);const w=(0,p.createDraggableData)(this,f),y={x:w.x,y:w.y,slackX:0,slackY:0};if(this.props.bounds){const{x:V,y:$}=y;y.x+=this.state.slackX,y.y+=this.state.slackY;const[z,re]=(0,p.getBoundPosition)(this,y.x,y.y);y.x=z,y.y=re,y.slackX=this.state.slackX+(V-y.x),y.slackY=this.state.slackY+($-y.y),w.x=y.x,w.y=y.y,w.deltaX=y.x-this.state.x,w.deltaY=y.y-this.state.y}if(this.props.onDrag(g,w)===!1)return!1;this.setState(y)}),M(this,"onDragStop",(g,f)=>{if(!this.state.dragging||this.props.onStop(g,(0,p.createDraggableData)(this,f))===!1)return!1;(0,S.default)("Draggable: onDragStop: %j",f);const y={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:V,y:$}=this.props.position;y.x=V,y.y=$}this.setState(y)}),this.state={dragging:!1,dragged:!1,x:c.position?c.position.x:c.defaultPosition.x,y:c.position?c.position.y:c.defaultPosition.y,prevPropsPosition:{...c.position},slackX:0,slackY:0,isElementSVG:!1},c.position&&!(c.onDrag||c.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var c,g;return(c=(g=this.props)===null||g===void 0||(g=g.nodeRef)===null||g===void 0?void 0:g.current)!==null&&c!==void 0?c:r.default.findDOMNode(this)}render(){const{axis:c,bounds:g,children:f,defaultPosition:w,defaultClassName:y,defaultClassNameDragging:I,defaultClassNameDragged:V,position:$,positionOffset:z,scale:re,...Se}=this.props;let oe={},ae=null;const se=!!!$||this.state.dragging,ie=$||w,le={x:(0,p.canDragX)(this)&&se?this.state.x:ie.x,y:(0,p.canDragY)(this)&&se?this.state.y:ie.y};this.state.isElementSVG?ae=(0,l.createSVGTransform)(le,z):oe=(0,l.createCSSTransform)(le,z);const _e=(0,s.default)(f.props.className||"",y,{[I]:this.state.dragging,[V]:this.state.dragged});return t.createElement(m.default,T({},Se,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(f),{className:_e,style:{...f.props.style,...oe},transform:ae}))}}e.default=Y,M(Y,"displayName","Draggable"),M(Y,"propTypes",{...m.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),M(Y,"defaultProps",{...m.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Re);const{default:ze,DraggableCore:Nn}=Re;ge.exports=ze;ge.exports.default=ze;ge.exports.DraggableCore=Nn;var En=ge.exports;const Bn=et(En),Mn=({images:e})=>{const{t}=ot(),n=Fe(tt),[r,s]=C.useState(),[l,p]=C.useState([]),[h,m]=C.useState([]),[S,v]=C.useState([]),[D,_]=C.useState([]),[T,M]=C.useState([]),[q,ne]=C.useState([]),[Y,u]=C.useState([]),[c,g]=C.useState([]),[f,w]=C.useState([]),y=C.useRef([]);C.useEffect(()=>{e&&(ne(e.map(o=>({x:o.left||0,y:o.top||0}))),u(e.map(o=>o.name||"Your Text")),g(e.map(o=>o.size||30)),w(e.map(o=>o.color_text||"#ffffff")),p(e.map(o=>o.country||t("Country"))),m(e.map(o=>o.language||t("Language"))),v(e.map(o=>o.value||t("Currency"))),_(e.map(o=>o.format||t("Banner format"))),M(e.map(o=>o.topic||t("Banner theme"))),y.current=e.map(()=>nt.createRef()))},[e]);const I=Z({mutationFn:o=>dt(o.picture_id,o.country,o.language,o.value,o.format,o.topic,o.color,o.left,o.right,o.top,o.bottom,o.size),onSuccess:()=>{U.invalidateQueries({queryKey:["img"]})},onError:o=>{be.error(o.message)}},U),V=Z({mutationFn:o=>ft(o.full_picture_id,o.country,o.language,o.value,o.format,o.topic,o.color,o.left,o.right,o.top,o.bottom,o.size),onSuccess:()=>{U.invalidateQueries({queryKey:["img"]})}},U),$=Z({mutationFn:o=>st(o.token,o.full_picture_id),onSuccess:o=>{s(o)},onError:o=>{be.error(o.message)}},U),z=o=>{$.mutate({token:n,full_picture_id:o})},re=Z({mutationFn:o=>pt(o.full_picture_id),onSuccess:o=>{U.invalidateQueries({queryKey:["img"]}),be.success(o.data)}},U),Se=o=>{re.mutate({full_picture_id:o})},oe=(o,a,i)=>{const F=[...q];F[o]={x:i.x,y:i.y},ne(F)},ae=(o,a)=>{const i=[...Y];i[o]=a.target.value,u(i)},Ee=(o,a)=>{const i=[...c];i[o]=parseInt(a.target.value,10),g(i)},se=(o,a)=>{const i=[...f];i[o]=a.target.value,w(i)},ie=(o,a)=>{const i=q[a],F=y.current[a].current;if(i&&F){const ce=F.offsetWidth,ue=F.offsetHeight,{x:de,y:fe}=i;o&&I.mutate({picture_id:o,country:l[a],language:h[a],value:S[a],format:D[a],topic:T[a],color:f[a],left:de.toString(),right:(de+ce).toString(),top:fe.toString(),bottom:(fe+ue).toString(),size:c[a]})}},le=(o,a)=>{const i=q[a],F=y.current[a].current;if(i&&F){const{x:ce,y:ue}=i,de=F.offsetWidth,fe=F.offsetHeight;o&&V.mutate({full_picture_id:o,country:l[a],language:h[a],value:S[a],format:D[a],topic:T[a],color:f[a],left:ce.toString(),right:(ce+de).toString(),top:ue.toString(),bottom:(ue+fe).toString(),size:c[a]})}},_e=(o,a)=>{const i=[...l];i[o]=a,p(i)},Ge=(o,a)=>{const i=[...h];i[o]=a,m(i)},Ke=(o,a)=>{const i=[...S];i[o]=a,v(i)},Qe=(o,a)=>{const i=[...D];i[o]=a,_(i)},Je=(o,a)=>{const i=[...T];i[o]=a,M(i)};return d.jsx("div",{className:x.mainBox,children:e&&e.map((o,a)=>d.jsxs("div",{className:x.redactorBox,children:[d.jsxs("div",{className:x.draggableImgBox,children:[d.jsx(Bn,{position:q[a],onDrag:(i,F)=>oe(a,i,F),bounds:"parent",children:d.jsx("div",{ref:y.current[a],className:x.draggableBox,style:{fontSize:`${c[a]}px`,color:f[a]},children:Y[a]})}),d.jsx("img",{className:x.redactorImg,src:o.url,alt:`img-${a}`}),d.jsx("img",{src:r,alt:""})]}),d.jsx("input",{className:x.redactorIn,type:"text",placeholder:"Label",value:Y[a]||"",onChange:i=>ae(a,i)}),d.jsx("input",{className:x.redactorIn,type:"number",value:c[a],onChange:i=>Ee(a,i),placeholder:"Text Size"}),d.jsx("input",{className:x.redactorIn,type:"color",value:f[a],onChange:i=>se(a,i),placeholder:"Text Color"}),d.jsxs("ul",{className:`${x.topbar}`,children:[d.jsx("li",{className:x.defaultSelect,children:d.jsx(Q,{defaultValue:t("Country"),onChange:i=>_e(a,i),value:l[a],items:[{value:"en",content:"en",id:"1"},{value:"ru",content:"ru",id:"2"},{value:"fr",content:"fr",id:"3"}]})}),d.jsx("li",{className:x.defaultSelect,children:d.jsx(Q,{defaultValue:t("Language"),onChange:i=>Ge(a,i),value:h[a],items:[{value:"en",content:"English",id:"1"},{value:"ru",content:"Русский",id:"2"},{value:"fr",content:"Française",id:"3"}]})}),d.jsx("li",{className:x.defaultSelect,children:d.jsx(Q,{defaultValue:t("Currency"),value:S[a],onChange:i=>Ke(a,i),items:[{value:"en",content:"English",id:"1"}]})}),d.jsx("li",{className:x.defaultSelect,children:d.jsx(Q,{defaultValue:t("Banner format"),value:D[a],onChange:i=>Qe(a,i),items:[{value:"300*300",content:"300*300",id:"1"},{value:"600*600",content:"600*600",id:"2"},{value:"900*900",content:"900*900",id:"3"}]})}),d.jsx("li",{className:`${x.defaultSelect} ${x.lastDefaultSelect}`,children:d.jsx(Q,{defaultValue:t("Banner theme"),value:T[a],onChange:i=>Je(a,i),items:[{value:"footbal",content:"footbal",id:"1"}]})})]}),o.picture_id?d.jsx(G,{className:x.adminRedactorButton,onClick:()=>ie(o.picture_id,a),children:"Отправить"}):d.jsx(G,{className:x.adminRedactorButton,onClick:()=>le(o.full_picture_id,a),children:"Изменить"}),o.full_picture_id&&d.jsxs(d.Fragment,{children:[d.jsx(G,{className:x.publish,onClick:()=>Se(o.full_picture_id),children:"Опубликовать"}),d.jsx(G,{className:x.publish,onClick:()=>z(o.full_picture_id),children:"Demo"})]})]},a))})};function Yn(){const e=Fe(rt),[t,n]=C.useState(),r=at({queryKey:["img"],queryFn:()=>ut(),enabled:!!(e!=null&&e.is_admin),retry:1},U);return C.useEffect(()=>{r.data&&n(r.data)},[r.data]),d.jsx(d.Fragment,{children:d.jsxs("div",{className:lt.adminPanelBlock,children:[d.jsx(Tt,{}),d.jsx(Mn,{images:t})]})})}export{Yn as default};
