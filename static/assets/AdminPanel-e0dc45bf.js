import{r,j as t,L as _,a as B,u as g,g as L,i as A,k as j,d as N,O as S}from"./index-bee3d541.js";import{L as C}from"./LoadImgServ-dade6b6b.js";import{f as E,l as F,a as R}from"./dataImg-133cec3b.js";import{u as U}from"./useQuery-f47dcb0f.js";import{u as q,a as $,q as y}from"./queryClient-035a8a99.js";import{g as w}from"./getAdminImg-09967c00.js";import{L as O}from"./ListFilter-d9eabdad.js";import{B as h}from"./Button-bf5f4e6b.js";import"./Modal.module-7cebd6cd.js";import"./ListBox-c6796353.js";const T="_adminPanelBlock_orxl9_1",D="_adminPanelBlockRight_orxl9_8",K="_adminPanelBlockUpper_orxl9_14",u={adminPanelBlock:T,adminPanelBlockRight:D,adminPanelBlockUpper:K},M="_staticImgBlock_17rmn_1",Q="_pictureIdList_17rmn_6",z="_link_17rmn_11",m={staticImgBlock:M,pictureIdList:Q,link:z};function G({images:n}){const[i,l]=r.useState([]),[a,c]=r.useState([]);return r.useEffect(()=>{n&&(l(n.filter(s=>s.picture_id)),c(n.filter(s=>s.full_picture_id)))},[n]),t.jsxs("div",{className:m.staticImgBlock,children:[t.jsxs("div",{children:[t.jsx("h2",{children:"Новые элементы"}),t.jsx("div",{className:m.pictureIdList,children:i.map(s=>t.jsx("div",{children:t.jsx(_,{className:m.link,to:`new/${s.picture_id}`,children:s.picture_id})},s.picture_id))})]}),t.jsxs("div",{children:[t.jsx("h2",{children:"Старые элементы"}),a.map(s=>t.jsx("div",{children:t.jsxs(_,{className:m.link,to:`old/${s.full_picture_id}`,children:[s.full_picture_id," ",s.name]})},s.full_picture_id))]})]})}const H="_filterBtns_v0c02_1",x={filterBtns:H};function J(){const n={country:"",language:"",currency:"",banner_format:"",banner_theme:""},i=B(),l=g(L),{t:a}=q(),c=A(),[s,f]=r.useState([{id:1,selectedValues:n}]),I=(e,o,V)=>{f(s.map(d=>d.id===e?{...d,selectedValues:{...d.selectedValues,[o]:V}}:d))},p=$({mutationFn:e=>E(e.token,e.country,e.language,e.value,e.format,e.topic),onSuccess:e=>{i(j.adminImgAdd(e))}},y),k=()=>{c("/admin-meneger"),s.forEach(e=>{p.mutate({token:l,country:e.selectedValues.country===a("Country")?"":e.selectedValues.country,language:e.selectedValues.language===a("Language")?"":e.selectedValues.language,value:e.selectedValues.currency===a("Currency")?"":e.selectedValues.currency,format:e.selectedValues.banner_format===a("Banner_format")?"":e.selectedValues.banner_format,topic:e.selectedValues.banner_theme===a("Banner_theme")?"":e.selectedValues.banner_theme})})},v=()=>{c("/admin-meneger"),p.mutate({token:l,country:"",language:"",value:"",format:"",topic:""})},P=e=>f(s.filter(o=>o.id!==e));return t.jsxs("div",{children:[s.map((e,o)=>t.jsx(O,{index:o,block:e,listBoxItems:F,handleListBoxChange:I,removeBlock:P,t:a},e.id)),t.jsx(h,{className:x.filterBtns,onClick:k,children:"Фильтровать"}),t.jsx(h,{className:x.filterBtns,onClick:v,children:"Очистить фильтр"})]})}function ie(){const n=g(N),i=g(w),l=B(),[a,c]=r.useState();r.useEffect(()=>{Array.isArray(i)&&i&&c(i)},[i]);const s=U({queryKey:["img"],queryFn:()=>R(),enabled:!!(n!=null&&n.is_admin),retry:1},y);return r.useEffect(()=>{s.data&&l(j.adminImgAdd(s.data))},[s.data]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:u.adminPanelBlock,children:[t.jsx(C,{}),t.jsxs("div",{className:u.adminPanelBlockRight,children:[t.jsxs("div",{className:u.adminPanelBlockUpper,children:[t.jsx(J,{}),t.jsx(G,{images:a})]}),t.jsx(S,{})]})]})})}export{ie as default};
