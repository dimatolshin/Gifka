import{j as s,L as S,p as P,r as c,c as k,q as v}from"./index-0e7a0c17.js";import{B as y}from"./Button-5ecb678d.js";import{u as C,t as q,a as F}from"./AuthType-fe2293ea.js";import{c as T}from"./authUser-6737c6dd.js";const $="_form_1qp0v_1",E="_title_1qp0v_5",R="_descr_1qp0v_12",L="_label_1qp0v_19",Y="_formTitle_1qp0v_25",B="_btn_1qp0v_31",e={form:$,title:E,descr:R,label:L,formTitle:Y,btn:B},M="/assets/SuccessForgot-e016dbe3.png",U="_boxSuccess_r1rdl_1",z="_img_r1rdl_6",A="_title_r1rdl_9",D="_descr_r1rdl_16",G="_link_r1rdl_24",a={boxSuccess:U,img:z,title:A,descr:D,link:G};function H(){return s.jsxs("div",{className:a.boxSuccess,children:[s.jsx("img",{className:a.img,src:M,alt:""}),s.jsx("h2",{className:a.title,children:"Your password is changed"}),s.jsxs("p",{className:a.descr,children:["Your password has been successfully updated. ",s.jsx("br",{}),"Your account's security is our priority."]}),s.jsx(S,{className:a.link,to:"/auths",children:"Sign in"})]})}function Q(){var d,m;const{uid:u,token:p}=P(),[w,g]=c.useState(!1),[n,h]=c.useState(!1),[l,x]=c.useState(!1),_=()=>{h(r=>!r)},f=()=>{x(r=>!r)},t=k({mutationFn:r=>T(r.new_password,r.re_new_password,r.uid,r.token),onSuccess:()=>{g(!0),b()}},v),{register:i,handleSubmit:j,formState:{errors:o},reset:b}=C({resolver:q(F)});return w?s.jsx(H,{}):s.jsxs("form",{className:e.form,onSubmit:j(({password:r,confirmPassword:N})=>{t.mutate({new_password:r,re_new_password:N,uid:u,token:p})}),children:[s.jsx("h2",{className:e.title,children:"Reset Password"}),s.jsx("p",{className:e.descr,children:"Enter your new password"}),s.jsxs("label",{className:e.label,children:[s.jsx("span",{className:e.formTitle,children:"Password"}),s.jsxs("div",{className:`input max-w-72 ${o.password?"border-danger":""}`,"data-toggle-password":"true",children:[s.jsx("input",{autoComplete:"new-password",placeholder:"Enter Password",type:n?"text":"password",...i("password")}),s.jsx("div",{onClick:_,className:"btn btn-icon","data-toggle-password-trigger":"true",children:n?s.jsx("i",{className:"ki-outline ki-eye-slash toggle-password-active:block"}):s.jsx("i",{className:"ki-outline ki-eye toggle-password-active:hidden"})})]}),o&&s.jsx("span",{className:e.error,children:(d=o.password)==null?void 0:d.message})]}),s.jsxs("label",{className:e.label,children:[s.jsx("span",{className:e.formTitle,children:"Confirm Password"}),s.jsxs("div",{className:`input max-w-72 ${o.confirmPassword?"border-danger":""}`,"data-toggle-password":"true",children:[s.jsx("input",{autoComplete:"new-password",placeholder:"Re-enter Password",type:l?"text":"password",...i("confirmPassword")}),s.jsx("div",{onClick:f,className:"btn btn-icon","data-toggle-password-trigger":"true",children:l?s.jsx("i",{className:"ki-outline ki-eye-slash toggle-password-active:block"}):s.jsx("i",{className:"ki-outline ki-eye toggle-password-active:hidden"})})]}),o&&s.jsx("span",{className:e.error,children:(m=o.confirmPassword)==null?void 0:m.message})]}),t.error&&s.jsx("span",{className:e.error,children:t.error.message}),s.jsx(y,{isLoading:t.isPending,className:e.btn,children:"Submit"})]})}export{Q as default};
