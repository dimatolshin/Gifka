import{r as y,j as s,R as Se}from"./index-a9b442b5.js";import{j as Ae,q as pe,h as Ie}from"./queryClient-ddd1e2ac.js";import{l as Ye}from"./adminImg-ad4b1690.js";import{L as ae}from"./ListBox-f4ecf11b.js";import"./classNames-3b7f1560.js";var j=[];for(var se=0;se<256;++se)j.push((se+256).toString(16).slice(1));function Oe(e,t=0){return(j[e[t+0]]+j[e[t+1]]+j[e[t+2]]+j[e[t+3]]+"-"+j[e[t+4]]+j[e[t+5]]+"-"+j[e[t+6]]+j[e[t+7]]+"-"+j[e[t+8]]+j[e[t+9]]+"-"+j[e[t+10]]+j[e[t+11]]+j[e[t+12]]+j[e[t+13]]+j[e[t+14]]+j[e[t+15]]).toLowerCase()}var J,Xe=new Uint8Array(16);function Le(){if(!J&&(J=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!J))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return J(Xe)}var Ne=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const me={randomUUID:Ne};function Ce(e,t,i){if(me.randomUUID&&!t&&!e)return me.randomUUID();e=e||{};var h=e.random||(e.rng||Le)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,t){i=i||0;for(var g=0;g<16;++g)t[i+g]=h[g];return t}return Oe(h)}const Re="_hiddenInput_91nnv_1",ze="_customLabel_91nnv_5",Pe="_fileName_91nnv_11",oe={hiddenInput:Re,customLabel:ze,fileName:Pe};function Ee(){const e=y.useRef(null),[t,i]=y.useState([]),[h,g]=y.useState(null),f=S=>{const O=Array.from(S.target.files).map(X=>({id:Ce(),file:X}));i(X=>[...X,...O]),g(O[O.length-1].file.name)},m=Ae({mutationFn:S=>Ye(S.formData),onSuccess:()=>{pe.invalidateQueries({queryKey:["img"]})}},pe),N=async()=>{if(t.length===0){alert("Файл не добавлен");return}const S=new FormData;t.forEach(({file:O})=>{S.append("photos",O)}),m.mutate({formData:S})},M=S=>{i(O=>{const X=O.filter(H=>H.id!==S);return X.length>0?g(X[X.length-1].file.name):g(null),X})},B=()=>{e.current.click()};return s.jsxs("div",{children:[s.jsx("input",{type:"file",multiple:!0,onChange:f,className:oe.hiddenInput,ref:e,accept:"image/*,.png,.jpg,.gif,.web,.jpeg,.svg"}),s.jsx("button",{onClick:B,className:oe.customLabel,children:"Выбрать файлы"}),h&&s.jsxs("span",{className:oe.fileName,children:["Последний загруженный файл: ",h]}),s.jsx("ul",{children:t.map(({id:S,file:O})=>s.jsxs("li",{children:[O.name,s.jsx("button",{onClick:()=>M(S),children:"Удалить"})]},S))}),s.jsx("button",{onClick:N,children:"Загрузить"})]})}var De=Object.defineProperty,ke=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,ye=(e,t,i)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,x=(e,t)=>{for(var i in t||(t={}))Be.call(t,i)&&ye(e,i,t[i]);if(xe)for(var i of xe(t))Ue.call(t,i)&&ye(e,i,t[i]);return e},I=(e,t)=>ke(e,Me(t));const de={x:0,y:0,width:0,height:0,unit:"px"};function fe(e,t,i){return Math.min(Math.max(e,t),i)}const we=(e,t,i,h)=>h==="pixel"?he(e,t,i):$e(e,t,i),$e=(e,t,i)=>e.unit==="%"?I(x(x({},de),e),{unit:"%"}):{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/i*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/i*100:0};function he(e,t,i){return e.unit?e.unit==="px"?I(x(x({},de),e),{unit:"px"}):{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*i/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*i/100:0}:I(x(x({},de),e),{unit:"px"})}const D={position:"absolute",outline:"1px solid rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.5)",width:10,height:10};var ce={exports:{}},Q={};(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var h=Object.getOwnPropertyNames(t).map(function(f){return t[f]});if(h.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(f){g[f]=f}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}})();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=Se,je=60103;if(Q.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var ve=Symbol.for;je=ve("react.element"),Q.Fragment=ve("react.fragment")}var Te=Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,He=Object.prototype.hasOwnProperty,Ve={key:!0,ref:!0,__self:!0,__source:!0};function be(e,t,i){var h,g={},f=null,m=null;for(h in i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(m=t.ref),t)He.call(t,h)&&!Ve.hasOwnProperty(h)&&(g[h]=t[h]);if(e&&e.defaultProps)for(h in t=e.defaultProps)g[h]===void 0&&(g[h]=t[h]);return{$$typeof:je,type:e,key:f,ref:m,props:g,_owner:Te.current}}Q.jsx=be,Q.jsxs=be,ce.exports=Q;const Y=ce.exports.jsx,P=ce.exports.jsxs,We=()=>P(y.Fragment,{children:[Y("div",{"data-dir":"s","data-ord":"s",style:I(x({},D),{bottom:0,left:"50%",marginBottom:-5,marginLeft:-5,cursor:"s-resize"})}),Y("div",{"data-dir":"n","data-ord":"n",style:I(x({},D),{top:0,left:"50%",marginTop:-5,marginLeft:-5,cursor:"n-resize"})}),Y("div",{"data-dir":"w","data-ord":"w",style:I(x({},D),{top:"50%",left:0,marginTop:-5,marginLeft:-5,cursor:"w-resize"})}),Y("div",{"data-dir":"e","data-ord":"e",style:I(x({},D),{top:"50%",right:0,marginTop:-5,marginRight:-5,cursor:"e-resize"})}),Y("div",{"data-dir":"se","data-ord":"se",style:I(x({},D),{bottom:0,right:0,marginBottom:-5,marginRight:-5,cursor:"se-resize"})}),Y("div",{"data-dir":"sw","data-ord":"sw",style:I(x({},D),{bottom:0,left:0,marginBottom:-5,marginLeft:-5,cursor:"sw-resize"})}),Y("div",{"data-dir":"nw","data-ord":"nw",style:I(x({},D),{top:0,left:0,marginTop:-5,marginLeft:-5,cursor:"nw-resize"})}),Y("div",{"data-dir":"ne","data-ord":"ne",style:I(x({},D),{top:0,right:0,marginTop:-5,marginRight:-5,cursor:"ne-resize"})})]}),qe=({area:e,onCropStart:t,showHandles:i,globalAreaStyle:h,customAreaRenderer:g,areaNumber:f})=>{const m={top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`};return P("div",{style:x(x(x({position:"absolute",border:"1px dashed rgba(0,0,0,0.5)",outline:"1px dashed rgba(255,255,255,0.5)",cursor:"move",boxSizing:"border-box",touchAction:"none"},m),h),e.areaStyle),onPointerDown:t,"data-wrapper":"wrapper",children:[g?g(I(x({},e),{areaNumber:f})):null,i?Y(We,{}):null]})},Ke=({areas:e})=>Y("table",{style:{position:"absolute",right:0,top:0},children:Y("tbody",{children:e.map((t,i)=>P("tr",{children:[P("td",{children:["x: ",Math.round(t.x)]}),P("td",{children:["y: ",Math.round(t.y)]}),P("td",{children:["width: ",Math.round(t.width)]}),P("td",{children:["height: ",Math.round(t.height)]}),P("td",{children:["unit: ",t.unit]})]},i))})}),_e=(e,t)=>e!==null&&(!!t(e)||_e(e.parentNode,t)),F={capture:!0,passive:!1},Qe=["e","w"],Ge=["n","s"],Je=["nw","ne","se","sw"],Ze=({maxAreas:e=1/0,unit:t="pixel",minWidth:i=0,minHeight:h=0,debug:g=!1,children:f,areas:m,onChange:N,maxWidth:M,maxHeight:B,wrapperStyle:S,globalAreaStyle:O,customAreaRenderer:X,mediaWrapperClassName:H})=>{const Z=y.useRef(null),G=y.useRef(null),[ee,te]=y.useState(0),[d,U]=y.useState({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1}),[$,V]=y.useState({areaChangeIndex:0,isChanging:!1}),E=()=>{const o=G.current;if(!o)return{x:0,y:0,width:0,height:0};const{x:p,y:l,width:c,height:b}=o.getBoundingClientRect();return{x:p,y:l,width:c,height:b}},n=y.useCallback(o=>{const p=d.clientX-o.x,l=d.clientY-o.y<d.startAreaY;return p<d.startAreaX?l?"nw":"sw":l?"ne":"se"},[d]),w=y.useCallback(o=>{const p=E();return he(o,p.width,p.height)},[]),v=y.useCallback(o=>{const p=E(),l=w(o),c=d.clientX-d.startClientX,b=d.clientY-d.startClientY;return l.x=fe(d.startAreaX+c,0,p.width-l.width),l.y=fe(d.startAreaY+b,0,p.height-l.height),l},[d,w]),A=y.useCallback(o=>{const p=E(),l=n(p),c=w(o),b=d.ord?d.ord:l,C=d.clientX-d.startClientX,u=d.clientY-d.startClientY,r={unit:"px",x:0,y:0,width:0,height:0,isChanging:!0,isNew:!1};l==="ne"?(r.x=d.startAreaX,r.width=C,r.height=Math.abs(u),r.y=d.startAreaY-r.height):l==="se"?(r.x=d.startAreaX,r.y=d.startAreaY,r.width=C,r.height=u):l==="sw"?(r.x=d.startAreaX+C,r.y=d.startAreaY,r.width=Math.abs(C),r.height=u):l==="nw"&&(r.x=d.startAreaX+C,r.width=Math.abs(C),r.height=Math.abs(u),r.y=d.startAreaY+u);const _=function(k,L,R,z,q=0,K=0,ie=R,re=z){const a=x({},k);a.y<0&&(a.height=Math.max(a.height+a.y,K),a.y=0),a.x<0&&(a.width=Math.max(a.width+a.x,q),a.x=0);const ue=R-(a.x+a.width);ue<0&&(a.x=Math.min(a.x,R-q),a.width+=ue);const ge=z-(a.y+a.height);return ge<0&&(a.y=Math.min(a.y,z-K),a.height+=ge),a.width<q&&(L!=="sw"&&L!="nw"||(a.x-=q-a.width),a.width=q),a.height<K&&(L!=="nw"&&L!="ne"||(a.y-=K-a.height),a.height=K),a.width>ie&&(L!=="sw"&&L!="nw"||(a.x-=ie-a.width),a.width=ie),a.height>re&&(L!=="nw"&&L!="ne"||(a.y-=re-a.height),a.height=re),a}(r,l,p.width,p.height,i,h,M,B);return Je.indexOf(b)>-1?(c.x=_.x,c.y=_.y,c.width=_.width,c.height=_.height):Qe.indexOf(b)>-1?(c.x=_.x,c.width=_.width):Ge.indexOf(b)>-1&&(c.y=_.y,c.height=_.height),c},[d,n,w,i,h,M,B]),ne=y.useCallback(o=>{o.preventDefault(),o.stopPropagation();const{isChanging:p,areaChangeIndex:l}=$;if(!p)return;const c=E(),b=m[l];let C;if(U(_=>I(x({},_),{clientX:o.clientX,clientY:o.clientY})),C=d.isResize?A(b):v(b),r=C,(u=b).width!==r.width||u.height!==r.height||u.x!==r.x||u.y!==r.y||u.unit!==r.unit){const _=we(C,c.width,c.height,t);N([...m.slice(0,l),x({},_),...m.slice(l+1)])}var u,r},[$,m,d,v,N,t,A]),W=y.useCallback(o=>{o.preventDefault(),o.stopPropagation();const{isChanging:p,areaChangeIndex:l}=$;if(p){V({isChanging:!1,areaChangeIndex:-1}),U({startClientX:0,startClientY:0,startAreaX:0,startAreaY:0,clientX:0,clientY:0,isResize:!1});const c=m[l];N([...m.slice(0,l),I(x({},c),{isNew:!1,isChanging:!1}),...m.slice(l+1)])}},[$,m,N]);return y.useEffect(()=>(document.addEventListener("pointermove",ne,F),document.addEventListener("pointerup",W,F),document.addEventListener("pointercancel",W,F),()=>{document.removeEventListener("pointermove",ne,F),document.removeEventListener("pointerup",W,F),document.removeEventListener("pointercancel",W,F)}),[ne,W]),P("div",{ref:Z,style:x({position:"relative",display:"inline-block",cursor:"crosshair",boxSizing:"border-box",maxWidth:"100%",touchAction:"none",lineHeight:0},S),children:[Y("div",{ref:G,onPointerDown:o=>{const p=o.currentTarget;if(p.dataset.wrapper||p.dataset.direction||_e(p,_=>{var k;return(k=_.dataset)==null?void 0:k.wrapper}))return;o.preventDefault(),o.stopPropagation();const l=E(),c=o.clientX-l.x,b=o.clientY-l.y,C={unit:"px",x:c,y:b,width:0,height:0,isChanging:!0,isNew:!0};U({startClientX:o.clientX,startClientY:o.clientY,startAreaX:c,startAreaY:b,clientX:o.clientX,clientY:o.clientY,isResize:!0}),te(ee+1);const u=we(C,l.width,l.height,t);let r;m.length<e?(N(m.concat(u)),r=m.length):(N([...m.slice(0,e-1),u]),r=e-1),V({areaChangeIndex:r,isChanging:!0})},style:{boxSizing:"border-box"},className:H,children:f}),m.map((o,p)=>Y(qe,{area:o,showHandles:!o.isNew,onCropStart:l=>((c,b)=>{c.preventDefault(),c.stopPropagation();const C=E(),u=he(m[b],C.width,C.height),r=c.target.dataset.ord,_=!!r;let k=c.clientX,L=c.clientY,R=u.x,z=u.y;r&&(r==="ne"||r=="e"?(R=u.x,z=u.y+u.height):r==="se"||r==="s"?(R=u.x,z=u.y):r==="sw"||r=="w"?(R=u.x+u.width,z=u.y):r!=="nw"&&r!="n"||(R=u.x+u.width,z=u.y+u.height),k=R+C.x,L=z+C.y),U({startClientX:k,startClientY:L,startAreaX:R,startAreaY:z,clientX:c.clientX,clientY:c.clientY,isResize:_,ord:r}),V({isChanging:!0,areaChangeIndex:b})})(l,p),globalAreaStyle:O,customAreaRenderer:X,areaNumber:p+1},p)),g?Y(Ke,{areas:m}):null]})},le="/assets/image-ebb7cc28.png",et="_managerBox_l65xn_1",tt="_box_l65xn_5",nt="_boxInfo_l65xn_9",it="_managerButton_l65xn_19",T={managerBox:et,box:tt,boxInfo:nt,managerButton:it},rt=()=>{const[e,t]=y.useState([]),[i,h]=y.useState(!1),{t:g}=Ie(),[f,m]=y.useState({width:0,height:0}),[N,M]=y.useState(),[B,S]=y.useState(),[O,X]=y.useState(),H=n=>{t(n.map(w=>({...w,id:Ce(),text:"",fontSize:"16",color:"#000000"})))},Z=(n,w)=>{const v=e.map(A=>A.id===n?{...A,text:w.target.value}:A);t(v)},G=(n,w)=>{const v=e.map(A=>A.id===n?{...A,fontSize:w.target.value}:A);t(v)},ee=(n,w)=>{const v=e.map(A=>A.id===n?{...A,color:w.target.value}:A);t(v)},te=n=>{const w=e.filter(v=>v.id!==n);t(w)},d=()=>{h(n=>!n)},U=n=>{const{naturalWidth:w,naturalHeight:v}=n.currentTarget;m({width:w,height:v})},$=n=>{M(n)},V=n=>{S(n)},E=n=>{X(n)};return s.jsxs("div",{className:T.managerBox,children:[s.jsxs("div",{children:[s.jsx("img",{style:{display:"none"},src:le,alt:""}),s.jsx("button",{className:T.managerButton,onClick:d,children:i?"Завершить":"Редактировать"})]}),i?s.jsx(Ze,{areas:e,onChange:H,children:s.jsxs("div",{className:T.box,children:[s.jsx("img",{src:le,alt:"my image"}),e.map(n=>s.jsx("div",{className:T.boxInfo,style:{position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,fontSize:`${n.fontSize}px`,color:n.color},children:n.text},n.id))]})}):s.jsxs("div",{className:T.box,style:{width:`${f.width}px`,height:`${f.height}px`},children:[s.jsx("img",{src:le,alt:"my image",onLoad:U}),e.map(n=>s.jsx("div",{className:T.boxInfo,style:{position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,fontSize:`${n.fontSize}px`,color:n.color},children:n.text},n.id))]}),s.jsx("div",{children:e.map((n,w)=>s.jsxs("div",{children:[s.jsx("input",{disabled:!i,type:"text",value:n.text,onChange:v=>Z(n.id,v),placeholder:"Введите текст"}),s.jsx("input",{disabled:!i,type:"text",value:n.fontSize,onChange:v=>G(n.id,v),placeholder:"Размер шрифта (например, 16px)"}),s.jsx("input",{disabled:!i,type:"color",value:n.color,onChange:v=>ee(n.id,v)}),s.jsxs("div",{children:["Area ",w+1,": x=",n.x,", y=",n.y,", width=",n.width,", height=",n.height,", text=",n.text,", fontSize=",n.fontSize,"px, color=",n.color]}),s.jsxs("div",{children:[s.jsx(ae,{defaultValue:g("Country"),onChange:$,value:N,items:[{value:"en",content:"en",id:"1"},{value:"ru",content:"ru",id:"2"},{value:"fr",content:"fr",id:"3"},{value:"es",content:"es",id:"4"},{value:"pr",content:"pr",id:"5"}]}),s.jsx(ae,{defaultValue:g("Language"),onChange:V,value:B,items:[{value:"en",content:"en",id:"1"},{value:"ru",content:"ru",id:"2"},{value:"fr",content:"fr",id:"3"},{value:"es",content:"es",id:"4"},{value:"pr",content:"pr",id:"5"}]}),s.jsx(ae,{defaultValue:g("Currency"),onChange:E,value:O,items:[{value:"en",content:"en",id:"1"},{value:"ru",content:"ru",id:"2"},{value:"fr",content:"fr",id:"3"},{value:"es",content:"es",id:"4"},{value:"pr",content:"pr",id:"5"}]})]}),s.jsx("button",{onClick:()=>te(n.id),children:"Удалить"})]},n.id))})]})};function ht(){return s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsx(Ee,{}),s.jsx(rt,{})]})})}export{ht as default};
